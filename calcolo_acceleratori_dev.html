<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcoli Boost</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        .container {
            display: flex;
            flex-direction: column; /* Modificato per impilare le schede su dispositivi mobili */
            max-width: 100%;
            margin: 0 auto;
        }

        .boost-section {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .boost-section h2 {
            margin-bottom: 10px;
            text-align: center;
        }

        .form-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .form-group label {
            flex: 0 0 90px; /* Larghezza fissa per label */
            text-align: right;
            margin-right: 10px;
        }

        .form-group select {
            flex: 1; /* Occupa lo spazio rimanente */
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
            text-align: center;
            margin-right: 5px;
        }

        .form-group .form-group input[type="checkbox"] {
            flex: 0; /* Occupa lo spazio rimanente */
            padding: 8px;
            border: 1px solid #ccc;
            text-align: center;            
            border-radius: 5px;
            font-size: 14px;
            width:30px; /* Larghezza minima */
            margin-right: 5px;
        }

        .form-group .percent-label {
            font-size: 14px;
            margin-left: 5px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: #fff;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        button:hover {
            background-color: #0056b3;
        }

        #result, #result2 {
            margin-top: 20px;
            font-size: 18px;
            text-align: center;
            color: #007bff;
        }

        @media only screen and (min-width: 600px) {
            /* Stili per schermi pi√π larghi (tablet e desktop) */
            .container {
                flex-direction: row;
                justify-content: space-between;
                width: 900px; /* Larghezza complessiva delle due schede */
            }

            .boost-section {
                width: calc(50% - 20px); /* Larghezza della singola scheda */
                margin-right: 10px; /* Margine destro tra le schede */
            }

            .boost-section:last-child {
                margin-right: 0; /* Rimuovere il margine destro per l'ultima scheda */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Scheda "Boost Ricerca Tecnologica" -->
        <div class="boost-section">
            <h2>Boost Ricerca Tecnologica</h2>
            <div class="form-group">
                <label for="centroTecnologico">Centro tecnologico:</label>
                <select id="centroTecnologico"></select>
                <span class="percent-label">%</span>
            </div>
            <div class="form-group">
                <label for="sopravvissutiCentroTecnologico">Sopravvissuti nel centro tecnologico:</label>
                <select id="sopravvissutiCentroTecnologico"></select>
              <span class="percent-label">%</span>
            </div>
            <div class="form-group">
                <label for="tecnologie">Tecnologie:</label>
                <select id="tecnologie"></select>
              <span class="percent-label">%</span>
            </div>
            <div class="form-group">
                <label for="Vip">VIP:</label>
                <select id="Vip"></select>
              <span class="percent-label">%</span>
            </div>
            <div class="form-group">
                <label for="Ra">Tecnologia dell'alleanza:</label>
                <select id="Ra"></select>
              <span class="percent-label">%</span>
            </div>
            <div class="form-group">
                <label for="ministroScienza">Ministro della scienza (+60%):</label>
                <input type="checkbox" id="ministroScienza">
            </div>
            <div class="form-group">
                <label for="dAccT">Tempo di accelerazione gratuito:</label>
    		<input type="checkbox" id="useAccT" onclick="toggleAccT()">                		    
                <select id="dAccT"></select>
                <select id="hAccT"></select>
                <select id="mAccT"></select>
                <select id="sAccT"></select>                
            </div>            
            <div class="form-group">
                <label for="dIniz">Orario originale:</label>
                <select id="dIniz"></select>
                <select id="hIniz"></select>
                <select id="mIniz"></select>
                <select id="sIniz"></select>
            </div>
            <div class="boost-calculation">
                <button onclick="runCalculation()">Applica i boost</button>
                <p id="result"></p>
            </div>
        </div>

        <!-- Scheda "Boost Costruzione" -->
        <div class="boost-section">
            <h2>Boost Costruzione</h2>
            <div class="form-group">
                <label for="tecnologie2">Tecnologie:</label>
                <select id="tecnologie2"></select>
              <span class="percent-label">%</span>
            </div>
            <div class="form-group">
                <label for="Vip2">VIP:</label>
                <select id="Vip2"></select>
              <span class="percent-label">%</span>
            </div>
            <div class="form-group">
                <label for="Ra2">Tecnologia dell'alleanza:</label>
                <select id="Ra2"></select>
              <span class="percent-label">%</span>
            </div>
            <div class="form-group">
                <label for="ministroEdilizia">Ministro dell'edilizia (+60%):</label>
                <input type="checkbox" id="ministroEdilizia">
            </div>
            <div class="form-group">
                <label for="dAccT2">Tempo di accelerazione gratuito:</label>
    		<input type="checkbox" id="useAccT2" onclick="toggleAccT2()">                		    		    
                <select id="dAccT2"></select>
                <select id="hAccT2"></select>
                <select id="mAccT2"></select>
                <select id="sAccT2"></select>                
            </div>                 
            <div class="form-group">
                <label for="dIniz2">Orario originale:</label>
                <select id="dIniz2"></select>
                <select id="hIniz2"></select>
                <select id="mIniz2"></select>
                <select id="sIniz2"></select>
            </div>
            <div class="boost-calculation">
                <button onclick="runCalculation2()">Applica i boost</button>
                <p id="result2"></p>
            </div>
        </div>
    </div>

    <script>
	// Funzione per generare le opzioni delle select con precisione specifica
	function generateOptions(maxValue, step, precision) {
		let options = '';
		for (let i = 0; i <= maxValue / step; i++) {
			let value = (i * step).toFixed(precision); // Calcola il valore con la precisione specificata
			options += `<option value="${value}">${value}</option>`;
		}
		return options;
	}
	
	// Funzione per popolare tutte le select con precisione e incremento specifici
	function populateSelects() {
		// Definire configurazioni specifiche per ogni campo
		const configurations = {
			centroTecnologico: { maxValue: 50, step: 0.1, precision: 1 },
			sopravvissutiCentroTecnologico: { maxValue: 100, step: 1, precision: 0 },
			tecnologie: { maxValue: 100, step: 0.1, precision: 1 },
			Vip: { maxValue: 50, step: 1, precision: 0 },
			Ra: { maxValue: 50, step: 0.1, precision: 1 },
			dAccT: { maxValue: 31, step: 1, precision: 0 },
			hAccT: { maxValue: 23, step: 1, precision: 0 },
			mAccT: { maxValue: 59, step: 1, precision: 0 },
			sAccT: { maxValue: 59, step: 1, precision: 0 },
			dIniz: { maxValue: 31, step: 1, precision: 0 },
			hIniz: { maxValue: 23, step: 1, precision: 0 },
			mIniz: { maxValue: 59, step: 1, precision: 0 },
			sIniz: { maxValue: 59, step: 1, precision: 0 },
			tecnologie2: { maxValue: 100, step: 0.1, precision: 1 },
			Vip2: { maxValue: 50, step: 1, precision: 1 },
			Ra2: { maxValue: 50, step: 0.1, precision: 1 },
			dAccT2: { maxValue: 31, step: 1, precision: 0 },
			hAccT2: { maxValue: 23, step: 1, precision: 0 },
			mAccT2: { maxValue: 59, step: 1, precision: 0 },
			sAccT2: { maxValue: 59, step: 1, precision: 0 },
			dIniz2: { maxValue: 31, step: 1, precision: 0 },
			hIniz2: { maxValue: 23, step: 1, precision: 0 },
			mIniz2: { maxValue: 59, step: 1, precision: 0 },
			sIniz2: { maxValue: 59, step: 1, precision: 0 }
		};
	
		// Popolare le select usando le configurazioni specifiche
		for (const [id, config] of Object.entries(configurations)) {
			document.getElementById(id).innerHTML = generateOptions(config.maxValue, config.step, config.precision);
		}
	}

	function toggleAccT() {
		const isChecked = document.getElementById('useAccT').checked;
		document.getElementById('dAccT').disabled = !isChecked;
		document.getElementById('hAccT').disabled = !isChecked;
		document.getElementById('mAccT').disabled = !isChecked;
		document.getElementById('sAccT').disabled = !isChecked;
	}

	function toggleAccT2() {
		const isChecked = document.getElementById('useAccT2').checked;
		document.getElementById('dAccT2').disabled = !isChecked;
		document.getElementById('hAccT2').disabled = !isChecked;
		document.getElementById('mAccT2').disabled = !isChecked;
		document.getElementById('sAccT2').disabled = !isChecked;
	}		    
      
        // Funzione per il calcolo del tempo con i boost
        function calculateTime(ministro, useAccT, dAccT, hAccT, mAccT, sAccT, dIniz, hIniz, mIniz, sIniz, centroTecnologico, sopravvissutiCentroTecnologico, tecnologie, Vip, Ra) {
            let V = parseFloat(centroTecnologico) || 0;
            let S = parseFloat(sopravvissutiCentroTecnologico) || 0;
            let R = parseFloat(tecnologie) || 0;
            let VipValue = parseFloat(Vip) || 0;
            let RaValue = parseFloat(Ra) || 0;

            let vTot = 100 + V + S + R + VipValue + RaValue + (ministro ? 60 : 0);

            let mTmp = (dIniz * 24 * 60) + (hIniz * 60) + mIniz + (sIniz / 60);
            let mTmp2 = mTmp * 100 / vTot;

            // Convertire i minuti totali in giorni, ore, minuti, secondi
            let totalSeconds = mTmp2 * 60;

	    if (useAccT) {
        	// Sottrarre il tempo di accelerazione gratuita in secondi
	        let accSeconds = ((dAccT * 24 * 60 * 60) + (hAccT * 60 * 60) + (mAccT * 60) + sAccT);
        	totalSeconds -= accSeconds;
	    }

            if (totalSeconds < 0) {
                return "Tempo di accelerazione maggiore del tempo iniziale";
            }

            let dFin = Math.floor(totalSeconds / (24 * 60 * 60));
            totalSeconds %= (24 * 60 * 60);

            let hFin = Math.floor(totalSeconds / (60 * 60));
            totalSeconds %= (60 * 60);

            let mFin = Math.floor(totalSeconds / 60);
            totalSeconds %= 60;

            let sFin = Math.floor(totalSeconds);

            return `${dFin}d ${hFin}h ${mFin}m ${sFin}s`;
        }

        // Funzione per il salvataggio dei parametri della prima scheda in localStorage
        function saveParameters() {
            localStorage.setItem('centroTecnologico', document.getElementById('centroTecnologico').value);
            localStorage.setItem('sopravvissutiCentroTecnologico', document.getElementById('sopravvissutiCentroTecnologico').value);
            localStorage.setItem('tecnologie', document.getElementById('tecnologie').value);
            localStorage.setItem('Vip', document.getElementById('Vip').value);
            localStorage.setItem('Ra', document.getElementById('Ra').value);
            localStorage.setItem('ministroScienza', document.getElementById('ministroScienza').checked ? 'true' : 'false');
            localStorage.setItem('dAccT', document.getElementById('dAccT').value);
            localStorage.setItem('hAccT', document.getElementById('hAccT').value);
            localStorage.setItem('mAccT', document.getElementById('mAccT').value);
            localStorage.setItem('sAccT', document.getElementById('sAccT').value);            
            localStorage.setItem('dIniz', document.getElementById('dIniz').value);
            localStorage.setItem('hIniz', document.getElementById('hIniz').value);
            localStorage.setItem('mIniz', document.getElementById('mIniz').value);
            localStorage.setItem('sIniz', document.getElementById('sIniz').value);
            localStorage.setItem('useAccT', document.getElementById('useAccT').checked ? 'true' : 'false');				
        }

        // Funzione per il caricamento dei parametri della prima scheda da localStorage
        function loadParameters() {
            document.getElementById('centroTecnologico').value = localStorage.getItem('centroTecnologico') || '';
            document.getElementById('sopravvissutiCentroTecnologico').value = localStorage.getItem('sopravvissutiCentroTecnologico') || '';
            document.getElementById('tecnologie').value = localStorage.getItem('tecnologie') || '';
            document.getElementById('Vip').value = localStorage.getItem('Vip') || '';
            document.getElementById('Ra').value = localStorage.getItem('Ra') || '';
            document.getElementById('ministroScienza').checked = localStorage.getItem('ministroScienza') === 'true';
            document.getElementById('dAccT').value = localStorage.getItem('dAccT') || '';
            document.getElementById('hAccT').value = localStorage.getItem('hAccT') || '';
            document.getElementById('mAccT').value = localStorage.getItem('mAccT') || '';
            document.getElementById('sAccT').value = localStorage.getItem('sAccT') || '';
            document.getElementById('dIniz').value = localStorage.getItem('dIniz') || '';
            document.getElementById('hIniz').value = localStorage.getItem('hIniz') || '';
            document.getElementById('mIniz').value = localStorage.getItem('mIniz') || '';
            document.getElementById('sIniz').value = localStorage.getItem('sIniz') || '';
            document.getElementById('useAccT').checked = localStorage.getItem('useAccT') === 'true';				
        }    

        // Funzione per il calcolo del tempo con i boost per la prima scheda
        function runCalculation() {
            saveParameters();

            let centroTecnologico = parseFloat(document.getElementById('centroTecnologico').value) || 0;
            let sopravvissutiCentroTecnologico = parseFloat(document.getElementById('sopravvissutiCentroTecnologico').value) || 0;
            let tecnologie = parseFloat(document.getElementById('tecnologie').value) || 0;
            let Vip = parseFloat(document.getElementById('Vip').value) || 0;
            let Ra = parseFloat(document.getElementById('Ra').value) || 0;
            let dAccT = parseInt(document.getElementById('dAccT').value) || 0;
            let hAccT = parseInt(document.getElementById('hAccT').value) || 0;
            let mAccT = parseInt(document.getElementById('mAccT').value) || 0;
            let sAccT = parseInt(document.getElementById('sAccT').value) || 0;
            let dIniz = parseInt(document.getElementById('dIniz').value) || 0;
            let hIniz = parseInt(document.getElementById('hIniz').value) || 0;
            let mIniz = parseInt(document.getElementById('mIniz').value) || 0;
            let sIniz = parseInt(document.getElementById('sIniz').value) || 0;
            let ministroEnabled = document.getElementById('ministroScienza').checked;
	    let useAccT = document.getElementById('useAccT').checked;

            let result = calculateTime(ministroEnabled, useAccT, dAccT, hAccT, mAccT, sAccT, dIniz, hIniz, mIniz, sIniz, centroTecnologico, sopravvissutiCentroTecnologico, tecnologie, Vip, Ra);

            document.getElementById('result').textContent = result;
        }

        // Funzione per il salvataggio dei parametri della seconda scheda in localStorage
        function saveParameters2() {
            localStorage.setItem('tecnologie2', document.getElementById('tecnologie2').value);
            localStorage.setItem('Vip2', document.getElementById('Vip2').value);
            localStorage.setItem('Ra2', document.getElementById('Ra2').value);
            localStorage.setItem('ministroEdilizia', document.getElementById('ministroEdilizia').checked ? 'true' : 'false');
            localStorage.setItem('dAccT2', document.getElementById('dAccT2').value);
            localStorage.setItem('hAccT2', document.getElementById('hAccT2').value);
            localStorage.setItem('mAccT2', document.getElementById('mAccT2').value);
            localStorage.setItem('sAccT2', document.getElementById('sAccT2').value);                        
            localStorage.setItem('dIniz2', document.getElementById('dIniz2').value);
            localStorage.setItem('hIniz2', document.getElementById('hIniz2').value);
            localStorage.setItem('mIniz2', document.getElementById('mIniz2').value);
            localStorage.setItem('sIniz2', document.getElementById('sIniz2').value);
            localStorage.setItem('useAccT2', document.getElementById('useAccT2').checked ? 'true' : 'false');		
        }

        // Funzione per il caricamento dei parametri della seconda scheda da localStorage
        function loadParameters2() {
            document.getElementById('tecnologie2').value = localStorage.getItem('tecnologie2') || '';
            document.getElementById('Vip2').value = localStorage.getItem('Vip2') || '';
            document.getElementById('Ra2').value = localStorage.getItem('Ra2') || '';
            document.getElementById('ministroEdilizia').checked = localStorage.getItem('ministroEdilizia') === 'true';
            document.getElementById('dAccT2').value = localStorage.getItem('dAccT2') || '';
            document.getElementById('hAccT2').value = localStorage.getItem('hAccT2') || '';
            document.getElementById('mAccT2').value = localStorage.getItem('mAccT2') || '';
            document.getElementById('sAccT2').value = localStorage.getItem('sAccT2') || '';
            document.getElementById('dIniz2').value = localStorage.getItem('dIniz2') || '';
            document.getElementById('hIniz2').value = localStorage.getItem('hIniz2') || '';
            document.getElementById('mIniz2').value = localStorage.getItem('mIniz2') || '';
            document.getElementById('sIniz2').value = localStorage.getItem('sIniz2') || '';
            document.getElementById('useAccT2').checked = localStorage.getItem('useAccT2') === 'true';		
        }

        // Funzione per il calcolo del tempo con i boost per la seconda scheda
        function runCalculation2() {
            saveParameters2();

            let tecnologie2 = parseFloat(document.getElementById('tecnologie2').value) || 0;
            let Vip2 = parseFloat(document.getElementById('Vip2').value) || 0;
            let Ra2 = parseFloat(document.getElementById('Ra2').value) || 0;
            let dAccT2 = parseInt(document.getElementById('dAccT2').value) || 0;
            let hAccT2 = parseInt(document.getElementById('hAccT2').value) || 0;
            let mAccT2 = parseInt(document.getElementById('mAccT2').value) || 0;
            let sAccT2 = parseInt(document.getElementById('sAccT2').value) || 0;            
            let dIniz2 = parseInt(document.getElementById('dIniz2').value) || 0;
            let hIniz2 = parseInt(document.getElementById('hIniz2').value) || 0;
            let mIniz2 = parseInt(document.getElementById('mIniz2').value) || 0;
            let sIniz2 = parseInt(document.getElementById('sIniz2').value) || 0;
            let ministroEnabled2 = document.getElementById('ministroEdilizia').checked;
	    let useAccT2 = document.getElementById('useAccT2').checked;

            let result = calculateTime(ministroEnabled2, useAccT2, dAccT2, hAccT2, mAccT2, sAccT2, dIniz2, hIniz2, mIniz2, sIniz2, 0, 0, tecnologie2, Vip2, Ra2);

            document.getElementById('result2').textContent = result;
        }

        // Carica i parametri al caricamento della pagina per entrambe le schede
        window.onload = function() {
            populateSelects();
            loadParameters();
            loadParameters2();
            toggleAccT();
            toggleAccT2();		
        };
    </script>
</body>
</html>
